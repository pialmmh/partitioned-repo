<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SqlGenerator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Generic Sharding-Aware Repository Framework</a> &gt; <a href="index.source.html" class="el_package">com.telcobright.core.sql</a> &gt; <span class="el_source">SqlGenerator.java</span></div><h1>SqlGenerator.java</h1><pre class="source lang-java linenums">package com.telcobright.core.sql;

import com.telcobright.core.metadata.EntityMetadata;
import com.telcobright.core.metadata.FieldMetadata;
import java.util.List;
import java.util.Map;

/**
 * SQL Generator Interface
 * Defines methods for generating SQL statements for different database operations
 */
public interface SqlGenerator {

    // DDL Operations
    String generateCreateTable(String tableName, EntityMetadata metadata);
    String generateCreateTableWithPartitions(String tableName, EntityMetadata metadata,
                                           String partitionColumn, String partitionType);
    String generateAlterTableAddPartition(String tableName, String partitionName,
                                        String partitionDefinition);
    String generateDropTable(String tableName);
    String generateCreateIndex(String tableName, String indexName, List&lt;String&gt; columns);
    String generateDropIndex(String tableName, String indexName);

    // DML Operations - Basic CRUD
    String generateInsert(String tableName, Map&lt;String, Object&gt; values);
    String generateBatchInsert(String tableName, List&lt;Map&lt;String, Object&gt;&gt; records);
    String generateSelectById(String tableName, String idColumn);
    String generateSelectAll(String tableName);
    String generateSelectWithWhere(String tableName, Map&lt;String, Object&gt; conditions);
    String generateSelectWithDateRange(String tableName, String dateColumn,
                                      String startDate, String endDate);
    String generateSelectByIdAndDateRange(String tableName, String idColumn,
                                        String dateColumn, String startDate, String endDate);
    String generateUpdate(String tableName, Map&lt;String, Object&gt; values,
                         Map&lt;String, Object&gt; conditions);
    String generateUpdateById(String tableName, String idColumn, Map&lt;String, Object&gt; values);
    String generateDelete(String tableName, Map&lt;String, Object&gt; conditions);
    String generateDeleteById(String tableName, String idColumn);
    String generateDeleteByDateRange(String tableName, String dateColumn,
                                   String startDate, String endDate);

    // Pagination and Sorting
    String generateSelectWithPagination(String baseQuery, int limit, int offset);
    String generateSelectWithSorting(String baseQuery, List&lt;SortField&gt; sortFields);
    String generateCountQuery(String tableName, Map&lt;String, Object&gt; conditions);

    // Advanced Queries
    String generateSelectBatchByIdGreaterThan(String tableName, String idColumn,
                                             String lastId, int batchSize);
    String generateSelectBeforeDate(String tableName, String dateColumn, String date);
    String generateSelectAfterDate(String tableName, String dateColumn, String date);
    String generateExistsQuery(String tableName, String idColumn);

    // Utility Methods
    String escapeIdentifier(String identifier);
    String escapeLiteral(Object value);
    String getDateFormat();
    String getCurrentTimestamp();
    boolean supportsIfNotExists();
    boolean supportsNativePartitioning();

    // Helper class for sorting
    class SortField {
        private final String column;
        private final SortDirection direction;

<span class="nc" id="L67">        public SortField(String column, SortDirection direction) {</span>
<span class="nc" id="L68">            this.column = column;</span>
<span class="nc" id="L69">            this.direction = direction;</span>
<span class="nc" id="L70">        }</span>

<span class="nc" id="L72">        public String getColumn() { return column; }</span>
<span class="nc" id="L73">        public SortDirection getDirection() { return direction; }</span>
    }

<span class="nc" id="L76">    enum SortDirection {</span>
<span class="nc" id="L77">        ASC, DESC</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>